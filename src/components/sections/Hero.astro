---
import { Image } from "astro:assets";
import overrides from '../../data/component-overrides.json';
import Section from "./Section.astro";
import HeroIlust from "../../assets/pics/hero-pic.png";

interface Props {
  title?: string;
  description?: string;
  image?: string;
  pageType?: string;
  [key: string]: any;
}

const { title, description, image, pageType = 'default', ...rest } = Astro.props;

// Get page-specific overrides
const pageOverrides = (overrides as any)[pageType]?.HeroSection || {};

// Default content
const defaultTitle = title || "Navigating the digital landscape for success";
const defaultDescription = description || "Our digital marketing agency helps businesses grow and succeed online through a range of services including SEO, PPC, social media marketing, and content creation.";

// Merge overrides
const finalProps = { ...rest, ...pageOverrides };

// Content from overrides or defaults
const heroTitle = finalProps.content?.title || defaultTitle;
const heroDescription = finalProps.content?.description || defaultDescription;
---

<Section id="home" style={`background-color: ${finalProps.backgroundColor || 'var(--dark)'}`}>
  <div
    class="grid grid-cols-1 grid-template md:grid-cols-2 md:grid-rows-1 mt-[135px]"
    style={`min-height: ${finalProps.height || 'auto'}`}
  >
    <div class="flex flex-col w-full lg:w-[66.5%]">
      <h1>{heroTitle}</h1>
    </div>
    <picture class="row-span-1 md:row-span-3">
      <Image
        src={HeroIlust}
        alt="Hero Illustration"
        loading="eager"
        decoding="sync"
        fetchpriority="high"
      />
    </picture>
    <div class="w-full lg:w-[66.5%]">
      <p class="my-[35px]">
        {heroDescription}
      </p>
      {finalProps.showCTA && (
        <button class="btn-primary w-full md:w-auto">
          {finalProps.ctaText || "Book a consultation"}
        </button>
      )}
    </div>
  </div>
</Section>
<style>
  .grid-template {
    grid-template-rows: auto 1fr;
  }
</style>
