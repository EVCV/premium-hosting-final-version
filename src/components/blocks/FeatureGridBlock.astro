---
interface Feature {
  icon: string;
  title: string;
  description: string;
}

interface Props {
  features: Feature[];
  columns?: 1 | 2 | 3 | 4;
  showAnimation?: boolean;
  className?: string;
}

const {
  features = [], // <--- This default value fixes the crash
  columns = 3,
  showAnimation = true,
  className = ""
} = Astro.props;

// Safety check: If features is still null/undefined or empty, don't render anything
if (!features || features.length === 0) {
  return null;
}

const columnClasses = {
  1: 'lg:grid-cols-1',
  2: 'lg:grid-cols-2', 
  3: 'lg:grid-cols-3',
  4: 'lg:grid-cols-4'
};
---

<div class={`grid grid-cols-1 md:grid-cols-2 ${columnClasses[columns]} gap-8 max-w-6xl mx-auto ${className}`}>
  {features.map((feature, index) => (
    <div 
      class={`feature-card luxury-card p-8 text-center group ${showAnimation ? 'animate-fade-in-up' : ''}`}
      style={showAnimation ? `animation-delay: ${index * 0.1}s` : ''}
    >
      <div class="feature-icon text-5xl mb-6 interactive-icon">
        {feature.icon}
      </div>
      
      <h3 class="text-xl font-semibold text-dark mb-4 group-hover:text-gold transition-colors duration-300">
        {feature.title}
      </h3>
      
      <p class="text-gray-600 leading-relaxed">
        {feature.description}
      </p>
    </div>
  ))}
</div>

<style>
  .feature-card {
    transition: all 0.3s ease;
  }

  .animate-fade-in-up {
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .feature-card:hover {
    transform: translateY(-8px);
  }

  .feature-icon {
    filter: grayscale(0);
    transition: all 0.3s ease;
  }

  .feature-card:hover .feature-icon {
    transform: scale(1.1) rotate(5deg);
    filter: drop-shadow(8px 8px 0px rgba(212, 175, 55, 1));
  }
</style>
