---
import overrides from '../../data/component-overrides.json';

interface Props {
  title?: string;
  content?: string;
  date?: string;
  author?: string;
  pageType?: string;
  [key: string]: any;
}

const { title, content, date, author, pageType = 'blog', ...rest } = Astro.props;

// Get page-specific overrides
const pageOverrides = (overrides as any)[pageType]?.PostContent || {};

// Merge overrides
const finalProps = { ...rest, ...pageOverrides };
---

<article class="post-content">
  {finalProps.showAuthor && author && (
    <div class="post-meta">
      <span class="author">By {author}</span>
      {finalProps.showDate && date && (
        <time datetime={date}>{new Date(date).toLocaleDateString()}</time>
      )}
    </div>
  )}

  {title && (
    <h1 class="post-title">{title}</h1>
  )}

  <div class="post-body prose">
    {content ? (
      <div set:html={content}></div>
    ) : (
      <p>Loading post content...</p>
    )}
  </div>
</article>

<style>
  .post-content {
    max-width: 800px;
    margin: 0 auto;
  }

  .post-meta {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    color: #666;
  }

  .author {
    font-weight: bold;
  }

  .post-title {
    font-size: 2rem;
    font-weight: bold;
    margin-bottom: 2rem;
    line-height: 1.2;
  }

  .post-body {
    line-height: 1.6;
    color: var(--text-color, #333);
  }

  .post-body :global(h1), .post-body :global(h2),
  .post-body :global(h3), .post-body :global(h4) {
    margin-top: 2rem;
    margin-bottom: 1rem;
  }

  .post-body :global(p) {
    margin-bottom: 1rem;
  }
</style>
